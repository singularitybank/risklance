# Risk Lance - クイックスタートガイド

**対象**: デモ実施者、テスター、開発者
**更新日**: 2025年10月29日

---

## 起動方法

### 1. ローカル環境で起動

```bash
# プロジェクトディレクトリに移動
cd C:\Users\singu\github\risklance

# ブラウザで index.html を開く
start index.html
```

または、エクスプローラーで `index.html` をダブルクリック

---

## ログイン情報

### デモ用アカウント

- **ユーザー名**: 任意 (例: admin, demo, test など)
- **パスワード**: 任意 (何でもOK)

> **Note**: 現在はデモ用なので、任意の値でログイン可能です

---

## 保険ギャップ検出機能の確認手順

### ステップ1: ログイン

1. ブラウザで `index.html` を開く
2. ユーザー名とパスワードを入力 (任意の値でOK)
3. 「ログイン」ボタンをクリック

### ステップ2: ダッシュボードでギャップアラートを確認

ログイン後、ダッシュボードに以下が表示されます:

#### ギャップサマリーカード
```
🔶 3件の保険ギャップ
   総不足額: 約26.8億円
```

#### 個別ギャップカード (3件)

1. **🔴 在庫補償不足** (高リスク)
   - 不足額: 3,200万円
   - 推奨: 火災保険の補償額増額

2. **🟡 賠償責任保険不足** (中リスク)
   - 不足額: 2億円
   - 推奨: 賠償責任保険の補償額見直し

3. **🟡 労災補償不足** (中リスク)
   - 不足額: 24.5億円
   - 推奨: 労災上乗せ保険の補償額増額

### ステップ3: 詳細を確認

1. 任意のギャップカードの「詳細を見る」ボタンをクリック
2. 詳細モーダルが表示される

#### モーダルに表示される情報

- **統計データ**
  - 現在の価値/売上/従業員数
  - 現在の補償額
  - 不足額

- **月次推移チャート** (在庫補償不足の場合)
  - 過去3ヶ月の在庫金額推移
  - 閾値(8,000万円)との比較

- **推奨アクション**
  - 具体的なアクション
  - 推定コスト
  - 期待される効果
  - ROI (投資対効果)

- **アクションボタン**
  - 「今すぐ相談する」: 代理店への相談画面を開く
  - 「閉じる」: モーダルを閉じる

---

## 機能一覧

### 保険ギャップ検出エンジン

#### 検出されるギャップ

| ギャップ種類 | 検出ロジック | 推奨基準 |
|------------|------------|---------|
| **在庫補償不足** | 過去3ヶ月連続で在庫が8,000万円超過 | 現在の在庫金額と同額の補償 |
| **賠償責任保険不足** | 年間売上の10%未満の補償 | 年間売上の10% |
| **労災補償不足** | 従業員1人あたり5,000万円未満 | 従業員数 × 5,000万円 |

#### リスクスコア改善予測

- ギャップ1件解決 → +6点向上
- 現在のスコア: 67点
- 3件解決後: 85点 (+18点向上)

---

## テストシナリオ

### シナリオ1: 基本動作確認 (2分)

1. ✅ ログイン
2. ✅ ダッシュボードにギャップアラート表示
3. ✅ 3件のギャップが表示される
4. ✅ サマリーカードに総不足額が表示される

### シナリオ2: 詳細表示確認 (3分)

1. ✅ 「在庫補償不足」の「詳細を見る」をクリック
2. ✅ モーダルが表示される
3. ✅ 統計データが正しく表示される
4. ✅ 月次推移チャートが表示される
5. ✅ 推奨アクションが表示される
6. ✅ ROI情報が表示される
7. ✅ モーダルを閉じる

### シナリオ3: 画面遷移確認 (2分)

1. ✅ サイドバーから「業務アプリ」をクリック
2. ✅ 業務アプリ画面が表示される
3. ✅ サイドバーから「メインポータル」をクリック
4. ✅ ダッシュボードに戻る
5. ✅ ギャップアラートが再表示される

---

## トラブルシューティング

### ギャップアラートが表示されない

#### 原因1: JavaScriptの読み込み順序エラー
**確認方法**: ブラウザの開発者ツール (F12) → Console を確認
**解決方法**: ページをリロード (F5)

#### 原因2: gapDetector が初期化されていない
**確認方法**: Console で `window.gapDetector` を入力して確認
**解決方法**:
1. ページをリロード
2. それでも解決しない場合は、index.html の script タグの順序を確認

#### 原因3: データマネージャーが初期化されていない
**確認方法**: Console で `window.dataManager` を入力して確認
**解決方法**: js/data.js が正しく読み込まれているか確認

---

### モーダルが開かない

#### 原因: onclick イベントが設定されていない
**確認方法**: Console でエラーメッセージを確認
**解決方法**: `viewGapDetail()` 関数が定義されているか確認

---

### スタイルが適用されていない

#### 原因: CSS ファイルが読み込まれていない
**確認方法**: Elements タブで `<link rel="stylesheet" href="css/gap-detector.css">` があるか確認
**解決方法**:
1. index.html で CSS の読み込みを確認
2. css/gap-detector.css ファイルが存在するか確認

---

## ブラウザ互換性

### 推奨ブラウザ

| ブラウザ | バージョン | 動作状況 | 備考 |
|---------|----------|---------|------|
| **Chrome** | 最新版 | ✅ 完全対応 | 推奨 |
| **Edge** | 最新版 | ✅ 完全対応 | 推奨 |
| **Firefox** | 最新版 | ⚠️ 未テスト | Week 1でテスト予定 |
| **Safari** | 最新版 | ⚠️ 未テスト | Week 1でテスト予定 |

### 非推奨ブラウザ

- Internet Explorer 11 以前: サポート対象外

---

## 開発者ツール

### コンソールコマンド

#### ギャップ分析を手動実行
```javascript
window.gapDetector.analyzeAllGaps()
```

#### ギャップアラートを再表示
```javascript
window.gapDetector.renderGapAlertsToDashboard()
```

#### 特定のギャップ詳細を表示
```javascript
viewGapDetail('在庫補償不足')
viewGapDetail('賠償責任保険不足')
viewGapDetail('労災補償不足')
```

#### データマネージャーの内容確認
```javascript
window.dataManager.getInventoryData()
window.dataManager.getSalesData()
window.dataManager.getEmployeeData()
```

#### 保険マネージャーの内容確認
```javascript
window.insuranceManager.policyData
```

---

## ファイル構造

```
risklance/
├── index.html                      # メインHTML
├── app.js                          # アプリケーションメイン
│
├── js/
│   ├── data.js                     # データ管理
│   ├── insurance-gap-detector.js   # ギャップ検出エンジン ★NEW
│   ├── insurance-manager.js        # 保険マネージャー
│   ├── alerts.js                   # アラート機能
│   ├── charts.js                   # グラフ機能
│   ├── risk-analysis.js            # リスク分析
│   ├── business-apps.js            # 業務アプリ
│   └── risk-branding.js            # リスクブランディング
│
├── css/
│   ├── main.css                    # メインスタイル
│   ├── dashboard.css               # ダッシュボード
│   ├── gap-detector.css            # ギャップ検出器 ★NEW
│   ├── business-apps.css           # 業務アプリ
│   ├── styles.css                  # 共通スタイル
│   ├── league-system.css           # リーグシステム
│   └── insurance.css               # 保険関連
│
├── test-gap-detector.html          # ギャップ検出テストページ ★NEW
├── TEST_REPORT.md                  # テストレポート ★NEW
├── INTEGRATION_TEST_REPORT.md      # 統合テストレポート ★NEW
├── DAY1-2_COMPLETION_SUMMARY.md    # 完了サマリー ★NEW
├── QUICK_START_GUIDE.md            # このファイル ★NEW
└── DEVELOPMENT_PLAN_3WEEKS.md      # 3週間開発計画
```

---

## デモ実施のコツ

### 準備

1. ✅ ブラウザを全画面表示にする
2. ✅ 開発者ツールは閉じておく
3. ✅ 不要なタブは閉じる
4. ✅ 通知をオフにする

### 実施

1. **ゆっくり操作する**
   - クリックの前に一呼吸
   - 画面が完全に表示されるのを待つ

2. **重要なポイントを強調**
   - 不足額の大きさ
   - ROIの高さ
   - リスクスコア改善効果

3. **ストーリーを語る**
   - 「この企業は在庫が増えているが...」
   - 「万が一火災が発生したら...」
   - 「Risk Lanceが自動的に検出...」

---

## よくある質問 (FAQ)

### Q1: ギャップ検出のデータはどこから取得していますか？

**A**: 現在は js/data.js にハードコードされたデモデータを使用しています。本番環境では、業務アプリ連携により自動取得します。

---

### Q2: なぜ在庫ギャップが「高リスク」ですか？

**A**: 以下の理由により高リスクと判定されます:
- 過去3ヶ月連続で閾値超過
- 現在の補償額との差が大きい (3,200万円)
- 発生時のインパクトが即座に企業を直撃

---

### Q3: ギャップ検出の基準は変更できますか？

**A**: はい、insurance-gap-detector.js の以下の部分を変更できます:
- 在庫閾値: Line 34 (`const threshold = 80000000`)
- 賠償保険率: Line 92 (`const recommendedCoverage = annualRevenue * 0.1`)
- 労災基準: Line 148 (`const recommendedCoverage = employeeCount * 50000000`)

---

### Q4: リアルタイムでギャップは更新されますか？

**A**: 現在は画面切り替え時に更新されます。リアルタイム更新は Day 3-5 で実装予定です。

---

## サポート

### 問題が解決しない場合

1. **ブラウザのキャッシュをクリア**
   - Chrome: Ctrl + Shift + Delete

2. **開発者ツールのコンソールでエラーを確認**
   - F12 → Console タブ

3. **テストページで動作確認**
   - test-gap-detector.html を開いて動作確認

---

## 次のステップ

Day 1-2の機能は完了しました。次は:

1. **Day 3-5**: リアルタイムダッシュボード強化
2. **Day 6-7**: 推奨アクションエンジン
3. **Week 2**: 差別化機能の実装

詳細は `DEVELOPMENT_PLAN_3WEEKS.md` を参照してください。

---

**最終更新**: 2025年10月29日
**作成者**: Claude Code
**バージョン**: 1.0
