# Risk Lance - データ駆動型リスクマネジメントプラットフォーム

リスクマネジメントと保険ポートフォリオ最適化のためのWebアプリケーションサンプル

## バージョン 1.1.0 新機能

- **代理店管理システム** - 保険代理店向けの顧客・証券管理機能
- **業務アプリ連携** - 販売・在庫・顧客管理システムの統合
- **保険詳細管理** - 保険契約の詳細表示と在庫リスク警告機能
- **総合リスクレポート** - リーグ/ギルド情報を含む包括的なレポート生成

## ファイル構造

```
risklance/
├── index.html                          # メイン企業向けアプリケーション
├── index_agency.html                   # 代理店管理システム
├── app.js                              # メインアプリケーション
├── js/                                 # JavaScript機能別モジュール
│   ├── data.js                        # データ管理・ダミーデータ
│   ├── alerts.js                      # アラート・通知機能
│   ├── charts.js                      # グラフ・チャート機能
│   ├── risk-analysis.js               # リスク分析機能
│   ├── risk-branding.js               # リスクブランディング・レポート機能
│   ├── business-apps.js               # 業務アプリ統合機能
│   ├── insurance-manager.js           # 保険契約詳細管理
│   ├── agency-app.js                  # 代理店アプリケーション
│   └── agency-data.js                 # 代理店データ管理
├── css/                                # CSSスタイルシート
│   ├── main.css                       # 共通スタイル
│   ├── dashboard.css                  # ダッシュボードスタイル
│   ├── styles.css                     # レガシースタイル
│   ├── league-system.css              # リーグシステムスタイル
│   ├── business-apps.css              # 業務アプリスタイル
│   ├── insurance.css                  # 保険管理スタイル
│   └── agency.css                     # 代理店システムスタイル
├── templates/                          # HTMLテンプレート
│   └── comprehensive-risk-report.html # 総合リスクレポートテンプレート
└── README.md                           # このファイル
```

## 機能概要

### 1. 認証・基本機能
- ユーザーログイン/ログアウト
- 画面遷移とナビゲーション
- レスポンシブデザイン

### 2. メインポータル
- ダッシュボード表示
- 業務データ概要
- 通知・お知らせ表示

### 3. 保険ポートフォリオ
- 保険契約一覧
- 保険カバー率表示
- 見直し推奨機能
- **保険詳細モーダル**
  - 証券番号・補償内容の詳細表示
  - リスクスコア評価
  - **在庫金額チェック機能**（NEW）
    - 3ヶ月連続で在庫が8,000万円超過時に警告
    - 補償額不足のアラート表示
    - リスクダッシュボードへの連動

### 4. 業務アプリ連携（NEW）
- **販売管理アプリ**
  - 受注管理
  - 請求書発行
  - 売上レポート
  - 今日の売上・月次売上統計

- **在庫管理アプリ**
  - 在庫一覧・在庫金額
  - 入出庫履歴
  - 在庫アラート
  - 在庫水準の月次推移

- **顧客管理アプリ（CRM）**
  - 顧客リスト管理
  - 商談情報
  - フォローアップ予定
  - 新規顧客統計

### 5. リスク・ダッシュボード（拡張版）
- **緊急アラートシステム**
  - 洪水リスク警告
  - 取引先信用リスク
  - 保険カバー状況表示

- **社内リスク分析**
  - 在庫水準推移（棒グラフ）
  - 従業員リスク分布（円グラフ）
  - システム脆弱性トレンド（線グラフ）

- **社外リスク分析**
  - 地域別災害リスクマップ
  - 取引先信用リスクチャート
  - 市場環境リスクゲージ

### 6. リスク・ブランディング
- **リーグシステム**
  - Bronze～Challengerの7段階リーグ
  - LP（リーグポイント）による順位付け
  - リアルタイムランキング表示
  - 進捗バーとレベルアップ表示

- **ギルドシステム**
  - 企業連合によるギルド形成
  - ギルドランキング
  - メンバー管理・統計

- **リスク体制評価**
  - 6カテゴリー別評価（Lv.1～5）
  - 情報セキュリティ、財務リスク、運用リスク
  - コンプライアンス、BCP/災害対策、品質管理

- **総合リスクレポート生成（NEW）**
  - リーグ・ギルド情報を含む包括レポート
  - リスク推移チャート（過去12ヶ月）
  - 保険加入状況の詳細分析
  - リスク対策実行履歴
  - 取引先向け評価サマリー
  - 財務健全性・認証情報
  - HTMLレポートの即座表示とPDF出力対応

### 7. 代理店管理システム（NEW）
- **顧客管理**
  - 顧客リスト・フィルタリング
  - 業種別・ステータス別管理
  - 顧客詳細情報表示

- **保険証券管理**
  - 証券番号検索
  - 満期管理
  - 保険会社別フィルタリング
  - ステータス管理（有効/満期間近/満期/解約）

- **通知・アラート**
  - 満期通知
  - 見直し依頼
  - リスク警告
  - 緊急対応案件

- **レポート機能**
  - 顧客別売上レポート
  - 満期管理レポート
  - リスク分析レポート

- **統計ダッシュボード**
  - 総顧客数・管理証券数
  - 要対応案件数
  - 月次手数料統計

## 技術仕様

### フロントエンド
- **HTML5** - セマンティックなマークアップ
- **CSS3** - フレックスボックス、グリッド、アニメーション
- **JavaScript ES6+** - モジュール分離、クラスベース設計

### ライブラリ・依存関係
- **Font Awesome 6.0** - アイコン表示

### ブラウザサポート
- Chrome (最新版)
- Firefox (最新版)
- Safari (最新版)
- Edge (最新版)

## セットアップ・使用方法

1. **ファイルの展開**
   ```bash
   # プロジェクトディレクトリに移動
   cd risklance
   ```

2. **ブラウザで開く**
   ```bash
   # index.htmlをブラウザで開く
   open index.html
   # または
   # Webサーバーを使用する場合
   python -m http.server 8000
   ```

3. **ログイン**
   - 任意のユーザー名・パスワードを入力
   - デモ用なので認証は形式的

4. **機能の確認**
   - サイドバーから各機能に遷移
   - 「リスク分析」で拡張されたダッシュボードを確認
   - グラフやアラートのインタラクション機能を体験

## JavaScript モジュール構成

### 1. data.js - データ管理
- `DataManager` クラス
- ダミーデータの管理
- データ取得・更新メソッド
- 在庫データ・月次推移管理
- 業務アプリデータ提供

### 2. alerts.js - アラート機能
- `AlertManager` クラス
- 緊急アラート処理
- 通知システム
- 保険関連アラート
- アクションダイアログ表示

### 3. charts.js - グラフ機能
- `ChartManager` クラス
- 棒グラフ、円グラフ、線グラフ
- アニメーション効果
- インタラクティブ機能

### 4. risk-analysis.js - リスク分析
- `RiskAnalysisManager` クラス
- リスク計算・予測
- 相関分析
- 推奨アクション生成

### 5. risk-branding.js - リスクブランディング（NEW）
- `RiskBrandingManager` クラス
- リーグシステム管理
- ギルドシステム管理
- リスク体制評価
- **総合リスクレポート生成**
  - データ収集・分析
  - HTMLレポート生成
  - リアルタイムランキング更新

### 6. business-apps.js - 業務アプリ統合（NEW）
- `BusinessAppsManager` クラス
- 販売・在庫・顧客アプリの統合
- タブ切り替え・ナビゲーション
- 統計データ更新
- データエクスポート機能
- キーボードショートカット

### 7. insurance-manager.js - 保険契約管理（NEW）
- `InsuranceManager` クラス
- 保険詳細モーダル表示
- **在庫金額チェック機能**
  - 3ヶ月連続8,000万円超過検証
  - 補償額不足アラート
  - リスクダッシュボードへの連動

### 8. agency-app.js - 代理店アプリ（NEW）
- `AgencyApp` クラス
- 代理店向けUI管理
- 顧客・証券管理
- フィルタリング・検索機能
- モーダル表示制御

### 9. agency-data.js - 代理店データ管理（NEW）
- `AgencyDataManager` クラス
- 顧客データ管理
- 証券データ管理
- 通知データ管理
- ダミーデータ生成

### 10. app.js - メインアプリ
- `RiskLanceApp` クラス
- アプリケーション統合
- 画面遷移制御
- イベント処理
- 全モジュールの初期化

## 依存関係

### 企業向けアプリケーション（index.html）
```
app.js (RiskLanceApp)
├── data.js (DataManager)
├── alerts.js (AlertManager)
├── charts.js (ChartManager)
├── risk-analysis.js (RiskAnalysisManager)
├── risk-branding.js (RiskBrandingManager)
├── business-apps.js (BusinessAppsManager)
└── insurance-manager.js (InsuranceManager)
```

### 代理店管理システム（index_agency.html）
```
agency-app.js (AgencyApp)
└── agency-data.js (AgencyDataManager)
```

## サンプルデータ

### 保険契約データ
- 火災保険、賠償責任保険、労災保険
- 契約期間、補償内容、ステータス

### リスクデータ
- 社内リスク: 在庫、従業員、サイバーセキュリティ
- 社外リスク: 災害、信用、市場環境
- 緊急アラート: 洪水リスク、取引先リスク

### 業務データ
- 売上、在庫、顧客数
- 前年同期比較
- トレンド分析

## カスタマイズ

### データの変更
```javascript
// data.js内のloadDummyData()メソッドを編集
this.data.emergencyAlerts = [
    // 新しいアラートデータを追加
];
```

### 新しいグラフの追加
```javascript
// charts.js内に新しいメソッドを追加
updateNewChart() {
    // グラフ更新ロジック
}
```

### リスク分析ロジックの拡張
```javascript
// risk-analysis.js内に新しい分析メソッドを追加
analyzeNewRisk() {
    // 新しいリスク分析ロジック
}
```

## 使用方法

### 企業向けアプリケーション
```bash
# index.htmlをブラウザで開く
open index.html
```

主な機能:
- メインポータル - 業務概要とお知らせ
- 保険ポートフォリオ - 保険契約管理と詳細表示
- 業務アプリ - 販売・在庫・顧客管理
- リスク・ダッシュボード - リスク分析とグラフ表示
- リスク・ブランディング - リーグ/ギルドシステムとレポート生成

### 代理店管理システム
```bash
# index_agency.htmlをブラウザで開く
open index_agency.html
```

主な機能:
- 顧客管理 - 顧客リストとフィルタリング
- 保険証券管理 - 証券検索と満期管理
- 通知・アラート - 満期通知とリスク警告
- レポート - 各種レポート生成

## キーボードショートカット

業務アプリ画面で使用可能:
- `Ctrl/Cmd + 1` - 販売管理アプリに切り替え
- `Ctrl/Cmd + 2` - 在庫管理アプリに切り替え
- `Ctrl/Cmd + 3` - 顧客管理アプリに切り替え

## 今後の拡張予定

- WebSocket対応によるリアルタイム更新
- 外部APIとの連携（気象庁、信用調査機関等）
- 詳細なユーザー権限管理
- モバイルアプリ対応
- 多言語対応
- AI/機械学習によるリスク予測
- ブロックチェーンを用いた証券管理

## ライセンス

このプロジェクトはサンプル・デモ用途です。